"use strict";(self.webpackChunkcustomer_management_app=self.webpackChunkcustomer_management_app||[]).push([[754],{4754:(Q,u,i)=>{i.r(u),i.d(u,{CustomersModule:()=>z});var Z=i(4908),m=i(2253),v=i(5861),t=i(4946),T=i(7545),M=i(8261),A=i(5996),d=i(95);let U=(()=>{class o{constructor(){this.model={filter:""},this.changed=new t.vpe}filterChanged(e){e.preventDefault(),this.changed.emit(this.model.filter)}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["cm-filter-textbox"]],outputs:{changed:"changed"},decls:3,vars:1,consts:[["type","text","name","filter",3,"ngModel","ngModelChange","keyup"]],template:function(r,n){1&r&&(t.TgZ(0,"form"),t._uU(1," Filter: "),t.TgZ(2,"input",0),t.NdJ("ngModelChange",function(s){return n.model.filter=s})("keyup",function(s){return n.filterChanged(s)}),t.qZA()()),2&r&&(t.xp6(2),t.Q6J("ngModel",n.model.filter))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.On,d.F],styles:["cm-filter-textbox[_ngcontent-%COMP%]{margin-top:5px}"]})}return o})();var O=i(6084),g=i(911),c=i(6814),h=i(8630);let f=(()=>{class o{transform(e){return e?e.trim():""}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275pipe=t.Yjl({name:"trim",type:o,pure:!0})}return o})();const x=function(o){return["/customers",o,"details"]},J=function(o){return["/customers",o,"edit"]},S=function(o){return["/customers",o,"orders"]};function F(o,p){if(1&o&&(t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"a",7),t._uU(4),t.ALo(5,"capitalize"),t.ALo(6,"capitalize"),t.qZA(),t.TgZ(7,"a",8),t._UZ(8,"i",9),t.qZA()(),t.TgZ(9,"div",10)(10,"div",11)(11,"div",12)(12,"a",13),t._UZ(13,"img",14),t.ALo(14,"lowercase"),t.qZA()(),t.TgZ(15,"div",15)(16,"div",16),t._uU(17),t.ALo(18,"trim"),t.qZA(),t.TgZ(19,"a",8),t._uU(20,"View Orders"),t.qZA()()()()()()),2&o){const e=p.$implicit;t.xp6(3),t.Q6J("routerLink",t.VKq(16,x,e.id)),t.xp6(1),t.AsE(" ",t.lcZ(5,8,e.firstName)," ",t.lcZ(6,10,e.lastName)," "),t.xp6(3),t.Q6J("routerLink",t.VKq(18,J,e.id)),t.xp6(6),t.MGl("src","assets/images/",t.lcZ(14,12,e.gender),".png",t.LSH),t.xp6(4),t.AsE("",t.lcZ(18,14,e.city),", ",e.state.name,""),t.xp6(2),t.Q6J("routerLink",t.VKq(20,S,e.id))}}function N(o,p){1&o&&(t.TgZ(0,"div"),t._uU(1," No Records Found "),t.qZA())}let C=(()=>{class o{constructor(e){this.trackbyService=e,this.customers=[]}ngOnInit(){}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(g.v))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["cm-customers-card"]],inputs:{customers:"customers"},decls:4,vars:3,consts:[[1,"container"],[1,"row","card-container"],["class","col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"card"],[1,"card-header"],[1,"white",3,"routerLink"],[3,"routerLink"],["title","Edit",1,"pull-right","glyphicon","glyphicon-edit","edit-icon","white"],[1,"card-body"],[1,"clearfix"],[1,"pull-left","card-body-left"],["href","#",1,"white"],[1,"card-image",3,"src"],[1,"pull-left","card-body-right"],[1,"card-body-content"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,F,21,22,"div",2),t.YNc(3,N,2,0,"div",3),t.qZA()()),2&r&&(t.xp6(2),t.Q6J("ngForOf",n.customers)("ngForTrackBy",n.trackbyService.customer),t.xp6(1),t.Q6J("ngIf",!n.customers.length))},dependencies:[m.rH,c.sg,c.O5,c.i8,h.e,f],styles:[".card-container[_ngcontent-%COMP%]{width:85%}.card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #d4d4d4;height:120px;margin-bottom:20px;position:relative}.card-header[_ngcontent-%COMP%]{background-color:#027ff4;font-size:14pt;color:#fff;padding:5px;width:100%}.card-close[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin-right:5px}.card-body[_ngcontent-%COMP%]{padding-left:5px}.card-body-left[_ngcontent-%COMP%]{margin-top:-5px}.card-body-right[_ngcontent-%COMP%]{margin-left:20px;margin-top:2px}.card-body-content[_ngcontent-%COMP%]{width:100px}.card-image[_ngcontent-%COMP%]{height:50px;width:50px;margin-top:10px}.white[_ngcontent-%COMP%], .white[_ngcontent-%COMP%]:hover{color:#fff}"],changeDetection:0})}return o})();var P=i(9697);let k=(()=>{class o{constructor(){this.sortProperty="",this.sorted=new t.vpe}set sortBy(e){this.sortProperty=e}onClick(e){e.preventDefault(),this.sorted.next(this.sortProperty)}static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","cmSortBy",""]],hostBindings:function(r,n){1&r&&t.NdJ("click",function(s){return n.onClick(s)})},inputs:{sortBy:["cmSortBy","sortBy"]},outputs:{sorted:"sorted"}})}return o})();const q=function(o){return["/customers",o,"details"]},b=function(o){return["/customers",o,"orders"]};function L(o,p){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",13),t.ALo(3,"lowercase"),t.qZA(),t.TgZ(4,"td")(5,"a",14),t._uU(6),t.ALo(7,"capitalize"),t.qZA()(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"capitalize"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"trim"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.ALo(20,"currency"),t.qZA(),t.TgZ(21,"td")(22,"a",14),t._uU(23,"View Orders"),t.qZA()()()),2&o){const e=p.$implicit;t.xp6(2),t.MGl("src","assets/images/",t.lcZ(3,9,e.gender),".png",t.LSH),t.xp6(3),t.Q6J("routerLink",t.VKq(21,q,e.id)),t.xp6(1),t.Oqu(t.lcZ(7,11,e.firstName)),t.xp6(3),t.Oqu(t.lcZ(10,13,e.lastName)),t.xp6(3),t.Oqu(e.address),t.xp6(2),t.Oqu(t.lcZ(15,15,e.city)),t.xp6(3),t.Oqu(e.state.name),t.xp6(2),t.Oqu(t.Dn7(20,17,e.orderTotal,"USD","symbol")),t.xp6(3),t.Q6J("routerLink",t.VKq(23,b,e.id))}}function B(o,p){1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"\xa0"),t.qZA(),t.TgZ(3,"td",15),t._uU(4,"No Records Found"),t.qZA()())}let y=(()=>{class o{constructor(e,r){this.sorterService=e,this.trackbyService=r,this.customers=[]}ngOnInit(){}sort(e){this.customers=this.sorterService.sort(this.customers,e)}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(P.X),t.Y36(g.v))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["cm-customers-grid"]],inputs:{customers:"customers"},decls:26,vars:3,consts:[[1,"container"],[1,"row","grid-container"],[1,"col-md-10"],[1,"table"],[1,"table","table-striped","table-hover"],["cmSortBy","firstName",3,"sorted"],["cmSortBy","lastName",3,"sorted"],["cmSortBy","address",3,"sorted"],["cmSortBy","city",3,"sorted"],["cmSortBy","state.name",3,"sorted"],[3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["alt","Customer Image",1,"grid-image",3,"src"],[3,"routerLink"],["colspan","7"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead")(6,"tr")(7,"th"),t._uU(8,"\xa0"),t.qZA(),t.TgZ(9,"th",5),t.NdJ("sorted",function(s){return n.sort(s)}),t._uU(10,"First Name"),t.qZA(),t.TgZ(11,"th",6),t.NdJ("sorted",function(s){return n.sort(s)}),t._uU(12,"Last Name"),t.qZA(),t.TgZ(13,"th",7),t.NdJ("sorted",function(s){return n.sort(s)}),t._uU(14,"Address"),t.qZA(),t.TgZ(15,"th",8),t.NdJ("sorted",function(s){return n.sort(s)}),t._uU(16,"City"),t.qZA(),t.TgZ(17,"th",9),t.NdJ("sorted",function(s){return n.sort(s)}),t._uU(18,"State"),t.qZA(),t.TgZ(19,"th",10),t.NdJ("click",function(){return n.sort("orderTotal")}),t._uU(20,"Order Total"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"\xa0"),t.qZA()()(),t.TgZ(23,"tbody"),t.YNc(24,L,24,25,"tr",11),t.YNc(25,B,5,0,"tr",12),t.qZA()()()()()()),2&r&&(t.xp6(24),t.Q6J("ngForOf",n.customers)("ngForTrackBy",n.trackbyService.customer),t.xp6(1),t.Q6J("ngIf",!n.customers.length))},dependencies:[m.rH,c.sg,c.O5,k,c.i8,c.H9,h.e,f],styles:[".grid-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:0}.grid-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.grid-image[_ngcontent-%COMP%]{height:50px;width:50px;margin-top:10px}"],changeDetection:0})}return o})();const w=["mapsContainer"];let _=(()=>{class o{get filteredCustomers(){return this._filteredCustomers}set filteredCustomers(e){this._filteredCustomers=e,this.updateMapComponentDataPoints()}constructor(e,r,n,a){this.componentFactoryResolver=e,this.dataService=r,this.filterService=n,this.logger=a,this.title="",this.filterText="",this.customers=[],this.displayMode=l.Card,this.displayModeEnum=l,this.totalRecords=0,this.pageSize=10,this.mapComponentRef={},this._filteredCustomers=[],this.mapsViewContainerRef={}}ngOnInit(){this.title="Customers",this.filterText="Filter Customers:",this.displayMode=l.Card,this.getCustomersPage(1)}changeDisplayMode(e){this.displayMode=e}pageChanged(e){this.getCustomersPage(e)}getCustomersPage(e){this.dataService.getCustomersPage((e-1)*this.pageSize,this.pageSize).subscribe(r=>{this.customers=this.filteredCustomers=r.results,this.totalRecords=r.totalRecords},r=>this.logger.log(r),()=>this.logger.log("getCustomersPage() retrieved customers for page: "+e))}filterChanged(e){e&&this.customers?(e=e.toUpperCase(),this.filteredCustomers=this.filterService.filter(this.customers,e,["firstName","lastName","city","state.name"])):this.filteredCustomers=this.customers}lazyLoadMapComponent(){var e=this;return(0,v.Z)(function*(){if(e.changeDisplayMode(l.Map),!e.mapsViewContainerRef.length){const{MapComponent:r}=yield i.e(697).then(i.bind(i,1697));console.log("Lazy loaded map component!"),e.mapComponentRef=e.mapsViewContainerRef.createComponent(r),e.mapComponentRef.instance.zoom=2,e.mapComponentRef.instance.dataPoints=e.filteredCustomers,e.mapComponentRef.instance.enabled=!0}})()}updateMapComponentDataPoints(){this.mapComponentRef&&this.mapComponentRef.instance&&(this.mapComponentRef.instance.dataPoints=this.filteredCustomers)}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(t._Vd),t.Y36(T.D),t.Y36(M.i),t.Y36(A.m))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["cm-customers"]],viewQuery:function(r,n){if(1&r&&t.Gf(w,5,t.s_b),2&r){let a;t.iGM(a=t.CRH())&&(n.mapsViewContainerRef=a.first)}},decls:34,vars:14,consts:[[1,"customers","view","indent"],[1,"container"],[1,"glyphicon","glyphicon-user"],[1,"row"],[1,"col-md-10"],[1,"navbar"],[1,"nav","navbar-nav"],[1,"toolbar-item"],[3,"click"],[1,"glyphicon","glyphicon-th-large"],[1,"glyphicon","glyphicon-align-justify"],[1,"glyphicon","glyphicon-map-marker"],["routerLink","/customers/0/edit"],[1,"glyphicon","glyphicon-plus"],[1,"navbar-right",3,"changed"],[3,"customers","hidden"],[3,"hidden"],["mapsContainer",""],[3,"totalItems","pageSize","pageChanged"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"header")(3,"h3"),t._UZ(4,"span",2),t._uU(5),t.qZA()(),t._UZ(6,"br"),t.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"ul",6)(11,"li",7)(12,"a",8),t.NdJ("click",function(){return n.changeDisplayMode(n.displayModeEnum.Card)}),t._UZ(13,"span",9),t._uU(14," Card View "),t.qZA()(),t.TgZ(15,"li",7)(16,"a",8),t.NdJ("click",function(){return n.changeDisplayMode(n.displayModeEnum.Grid)}),t._UZ(17,"span",10),t._uU(18," List View "),t.qZA()(),t.TgZ(19,"li",7)(20,"a",8),t.NdJ("click",function(){return n.lazyLoadMapComponent()}),t._UZ(21,"span",11),t._uU(22," Map View "),t.qZA()(),t.TgZ(23,"li",7)(24,"a",12),t._UZ(25,"span",13),t._uU(26," New Customer "),t.qZA()()(),t.TgZ(27,"cm-filter-textbox",14),t.NdJ("changed",function(s){return n.filterChanged(s)}),t.qZA()()()(),t._UZ(28,"cm-customers-card",15)(29,"cm-customers-grid",15),t.TgZ(30,"div",16),t.GkF(31,null,17),t.qZA(),t.TgZ(33,"cm-pagination",18),t.NdJ("pageChanged",function(s){return n.pageChanged(s)}),t.qZA()()()),2&r&&(t.xp6(5),t.hij(" ",n.title," "),t.xp6(7),t.ekj("active",n.displayMode===n.displayModeEnum.Card),t.xp6(4),t.ekj("active",n.displayMode===n.displayModeEnum.Grid),t.xp6(4),t.ekj("active",n.displayMode===n.displayModeEnum.Map),t.xp6(8),t.Q6J("customers",n.filteredCustomers)("hidden",n.displayMode!==n.displayModeEnum.Card),t.xp6(1),t.Q6J("customers",n.filteredCustomers)("hidden",n.displayMode!==n.displayModeEnum.Grid),t.xp6(1),t.Q6J("hidden",n.displayMode!==n.displayModeEnum.Map),t.xp6(3),t.Q6J("totalItems",n.totalRecords)("pageSize",n.pageSize))},dependencies:[m.rH,U,O.Q,C,y],encapsulation:2})}return o})();var l=function(o){return o[o.Card=0]="Card",o[o.Grid=1]="Grid",o[o.Map=2]="Map",o}(l||{});const G=[{path:"",component:_}];let R=(()=>{class o{static#t=this.components=[_,C,y];static#e=this.\u0275fac=function(r){return new(r||o)};static#o=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(G),m.Bz]})}return o})(),z=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[R,Z.m]})}return o})()}}]);